(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["stack"],{"02db":function(t,a,s){},"02e0":function(t,a,s){"use strict";var e=s("02db"),i=s.n(e);i.a},1681:function(t,a,s){},a782:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("v-card",{attrs:{flat:""}},[s("v-toolbar",{attrs:{src:t.stack.picture?t.stack.picture:"https://picsum.photos/720",dark:"",prominent:"",flat:""}},[s("v-btn",{attrs:{icon:"",to:"/stacks"}},[s("v-icon",[t._v(" mdi-arrow-left ")])],1),s("v-spacer"),s("v-btn",{attrs:{icon:""}},[s("v-icon",[t._v(" mdi-share-variant ")])],1)],1),s("v-card",{staticClass:"mx-auto",staticStyle:{"margin-top":"-40px"},attrs:{"max-width":"500"}},[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v(" "+t._s(t.stack.name)+" ")]),s("v-spacer"),t.stack.unknown?t._e():s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.stack.subscribed,expression:"stack.subscribed"}],attrs:{icon:""},on:{click:t.unsubStack}},[s("v-icon",[t._v("mdi-bell-check")])],1),t.stack.unknown?t._e():s("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.stack.subscribed,expression:"!stack.subscribed"}],attrs:{icon:""},on:{click:t.subStack}},[s("v-icon",[t._v("mdi-bell-off")])],1),t.stack.unknown?t._e():s("v-btn",{attrs:{icon:""},on:{click:function(a){t.dialog=!0}}},[s("v-icon",[t._v("mdi-pencil")])],1),t.stack.unknown?t._e():s("v-btn",{attrs:{icon:""},on:{click:t.deleteStack}},[s("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1),s("v-container",[s("v-row",[s("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"0",lg:"4"}}),s("v-col",{staticClass:"py-0 my-0",attrs:{cols:"12",lg:"4"}},[s("v-row",[t.stack.unknown?s("v-col",[s("v-btn",{attrs:{block:""},on:{click:t.addStack}},[t._v(" Subscribe to stack ")])],1):s("v-col",[s("v-btn",{attrs:{block:""},on:{click:function(a){t.newCardDialog=!0}}},[t._v(" Add card ")])],1),t._l(t.stack.cards,(function(a){return s("v-col",{key:a._id,attrs:{cols:"12"}},[s("card",{attrs:{card:a},on:{click:function(s){return t.openCard(a)}}})],1)}))],2)],1),s("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"0",lg:"4"}})],1)],1),s("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[s("stackDialog",{attrs:{stack:t.stack,title:"Edit stack"},on:{save:t.saveStack,close:function(a){t.dialog=!1}}})],1),s("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.newCardDialog,callback:function(a){t.newCardDialog=a},expression:"newCardDialog"}},[s("card-dialog",{attrs:{title:"New Card",card:t.newCard},on:{save:t.saveNewCard,close:function(a){t.newCardDialog=!1}}})],1),s("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.cardDialog,callback:function(a){t.cardDialog=a},expression:"cardDialog"}},[s("v-card",{staticClass:"my-3"},[s("v-card-actions",[s("v-btn",{attrs:{icon:""},on:{click:function(a){t.cardDialog=!1}}},[s("v-icon",[t._v("mdi-close")])],1),s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:function(a){t.editCardDialog=!t.editCardDialog}}},[s("v-icon",[t._v("mdi-pencil")])],1),s("v-btn",{attrs:{icon:""},on:{click:t.deleteCard}},[s("v-icon",[t._v("mdi-delete")])],1)],1)],1),t.editCardDialog?s("card-dialog",{attrs:{card:t.card},on:{save:t.saveCard,close:function(a){t.cardDialog=t.editCardDialog=!1}}}):s("card",{attrs:{card:t.card}})],1)],1)},i=[],c=s("2f62"),o=s("bc3a"),r=s.n(o),n=s("6cb4"),l=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("v-card",[s("v-card-title",[t.title?s("span",{staticClass:"headline"},[t._v(" "+t._s(t.title)+" "),s("v-icon",[t._v("mdi-cards")])],1):t._e()]),s("v-card-text",[s("v-textarea",{attrs:{outlined:"",label:"Front"},model:{value:t.card.front,callback:function(a){t.$set(t.card,"front",a)},expression:"card.front"}}),s("v-divider"),s("v-textarea",{attrs:{outlined:"",label:"Back"},model:{value:t.card.back,callback:function(a){t.$set(t.card,"back",a)},expression:"card.back"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Close ")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)},d=[],h={props:{card:Object,title:String},methods:{close(){this.$emit("close")},save(){console.log(this.card),this.$emit("save",this.card)}}},u=h,k=s("2877"),v=s("6544"),p=s.n(v),g=s("8336"),b=s("b0af"),m=s("99d9"),w=s("ce7e"),f=s("132d"),_=s("2fa4"),C=(s("1681"),s("8654")),x=s("58df");const D=Object(x["a"])(C["a"]);var S=D.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...C["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const a=t.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(s,a)+"px"},genInput(){const t=C["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){C["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),V=Object(k["a"])(u,l,d,!1,null,null,null),y=V.exports;p()(V,{VBtn:g["a"],VCard:b["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VDivider:w["a"],VIcon:f["a"],VSpacer:_["a"],VTextarea:S});var H=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("v-card",{on:{click:function(a){return t.$emit("click")}}},[s("v-card-text",{staticClass:"pa-4",domProps:{innerHTML:t._s(t.compileMarkdown(t.card.front))}}),s("v-divider"),s("v-card-text",{staticClass:"pa-4",domProps:{innerHTML:t._s(t.compileMarkdown(t.card.back))}})],1)},I=[],$=s("0e54"),T=s.n($),N=s("c0c4"),O=s.n(N),j={props:{card:Object},methods:{compileMarkdown(t){let a=T()(t);return O.a.sanitize(a)}}},z=j,M=Object(k["a"])(z,H,I,!1,null,null,null),G=M.exports;p()(M,{VCard:b["a"],VCardText:m["c"],VDivider:w["a"]});var B={components:{stackDialog:n["a"],cardDialog:y,card:G},computed:{...Object(c["c"])(["stack","user","host"])},data:()=>({dialog:!1,newCardDialog:!1,cardDialog:!1,editCardDialog:!1,newCard:{front:"",back:""},card:!1}),methods:{...Object(c["b"])(["getStacks","getStack"]),deleteStack(){r.a.delete(this.host+"/api/stacks/"+this.stack._id).then(t=>{console.log("Deleted stack"),this.getStacks().then(t=>{this.$router.push("/stacks")})})},saveStack(){let t=this.stack;r.a.put(this.host+"/api/stacks/"+this.stack._id,t).then(t=>{this.getStacks(),this.getStack(this.stack._id),this.dialog=!1})},saveNewCard(t){console.log(t),r.a.post(this.host+"/api/stacks/"+this.stack._id,t).then(t=>{this.getStack(this.stack._id).then(t=>{this.newCardDialog=!1})})},saveCard(t){r.a.put(this.host+"/api/stacks/"+this.stack._id+"/"+this.card._id,t).then(t=>{this.getStack(this.stack._id),this.cardDialog=this.editCardDialog=!1})},deleteCard(){r.a.delete(this.host+"/api/stacks/"+this.stack._id+"/"+this.card._id).then(t=>{this.getStack(this.stack._id),this.cardDialog=this.editCardDialog=!1})},subStack(){r.a.put(this.host+"/api/stacks/"+this.stack._id+"/sub").then(t=>{this.getStacks(),this.getStack()})},unsubStack(){r.a.delete(this.host+"/api/stacks/"+this.stack._id+"/sub").then(t=>{this.getStack(),this.getStacks()})},addStack(){r.a.post(this.host+"/api/stacks/"+this.stack._id+"/sub").then(t=>{this.getStacks(),this.getStack()})},compileMarkdown(t){let a=marked(t);return DOMPurify.sanitize(a)},openCard(t){this.card=t,this.cardDialog=!0}},created(){this.stack.unknown||r.a.patch(this.host+"/api/stacks/"+this.stack._id)}},R=B,E=(s("02e0"),s("62ad")),F=s("a523"),P=s("169a"),A=s("0fd9"),J=s("71d9"),L=s("2a7f"),K=Object(k["a"])(R,e,i,!1,null,null,null);a["default"]=K.exports;p()(K,{VBtn:g["a"],VCard:b["a"],VCardActions:m["a"],VCol:E["a"],VContainer:F["a"],VDialog:P["a"],VIcon:f["a"],VRow:A["a"],VSpacer:_["a"],VToolbar:J["a"],VToolbarTitle:L["a"]})}}]);
//# sourceMappingURL=stack.3f240ecd.js.map