(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["stack"],{"02db":function(t,a,e){},"02e0":function(t,a,e){"use strict";var s=e("02db"),i=e.n(s);i.a},1681:function(t,a,e){},"8ce9":function(t,a,e){},a782:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-card",{attrs:{flat:""}},[e("v-toolbar",{attrs:{src:t.stack.picture?t.stack.picture:"https://picsum.photos/720",dark:"",prominent:"",flat:""}},[e("v-btn",{attrs:{icon:"",to:"/stacks"}},[e("v-icon",[t._v(" mdi-arrow-left ")])],1),e("v-spacer"),e("v-btn",{attrs:{icon:""}},[e("v-icon",[t._v(" mdi-share-variant ")])],1)],1),e("v-card",{staticClass:"mx-auto",staticStyle:{"margin-top":"-40px"},attrs:{"max-width":"400"}},[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[t._v(" "+t._s(t.stack.name)+" ")]),e("v-spacer"),t.stack.unknown?t._e():e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.stack.subscribed,expression:"stack.subscribed"}],attrs:{icon:""},on:{click:t.unsubStack}},[e("v-icon",[t._v("mdi-bell-check")])],1),t.stack.unknown?t._e():e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.stack.subscribed,expression:"!stack.subscribed"}],attrs:{icon:""},on:{click:t.subStack}},[e("v-icon",[t._v("mdi-bell-off")])],1),t.stack.unknown?t._e():e("v-btn",{attrs:{icon:""},on:{click:function(a){t.dialog=!0}}},[e("v-icon",[t._v("mdi-pencil")])],1),t.stack.unknown?t._e():e("v-btn",{attrs:{icon:""},on:{click:t.deleteStack}},[e("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1),e("v-container",[e("v-row",[e("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"0",lg:"4"}}),e("v-col",{staticClass:"py-0 my-0",attrs:{cols:"12",lg:"4"}},[e("v-row",[t.stack.unknown?e("v-col",[e("v-btn",{attrs:{block:""},on:{click:t.addStack}},[t._v(" Subscribe to stack ")])],1):e("v-col",[e("v-btn",{attrs:{block:""},on:{click:function(a){t.newCardDialog=!0}}},[t._v(" Add card ")])],1),t._l(t.stack.cards,(function(a){return e("v-col",{key:a._id,attrs:{cols:"12"}},[e("card",{attrs:{card:a},on:{click:function(e){return t.openCard(a)}}})],1)}))],2)],1),e("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"0",lg:"4"}})],1)],1),e("v-dialog",{model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("stackDialog",{attrs:{stack:t.stack,title:"Edit stack"},on:{save:t.saveStack,close:function(a){t.dialog=!1}}})],1),e("v-dialog",{attrs:{persistent:""},model:{value:t.newCardDialog,callback:function(a){t.newCardDialog=a},expression:"newCardDialog"}},[e("card-dialog",{attrs:{title:"New Card",card:t.newCard},on:{save:t.saveNewCard,close:function(a){t.newCardDialog=!1}}})],1),e("v-dialog",{attrs:{persistent:""},model:{value:t.cardDialog,callback:function(a){t.cardDialog=a},expression:"cardDialog"}},[e("v-card",{staticClass:"my-3"},[e("v-card-actions",[e("v-btn",{attrs:{icon:""},on:{click:function(a){t.cardDialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){t.editCardDialog=!t.editCardDialog}}},[e("v-icon",[t._v("mdi-pencil")])],1),e("v-btn",{attrs:{icon:""},on:{click:t.deleteCard}},[e("v-icon",[t._v("mdi-delete")])],1)],1)],1),t.editCardDialog?e("card-dialog",{attrs:{card:t.card},on:{save:t.saveCard,close:function(a){t.cardDialog=t.editCardDialog=!1}}}):e("card",{attrs:{card:t.card}})],1)],1)},i=[],c=e("2f62"),o=e("bc3a"),r=e.n(o),n=e("6cb4"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",[e("v-card-title",[t.title?e("span",{staticClass:"headline"},[t._v(" "+t._s(t.title)+" "),e("v-icon",[t._v("mdi-cards")])],1):t._e()]),e("v-card-text",[e("v-textarea",{attrs:{outlined:"",label:"Front"},model:{value:t.card.front,callback:function(a){t.$set(t.card,"front",a)},expression:"card.front"}}),e("v-divider"),e("v-textarea",{attrs:{outlined:"",label:"Back"},model:{value:t.card.back,callback:function(a){t.$set(t.card,"back",a)},expression:"card.back"}})],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Close ")]),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)},d=[],h={props:{card:Object,title:String},methods:{close(){this.$emit("close")},save(){console.log(this.card),this.$emit("save",this.card)}}},v=h,u=e("2877"),k=e("6544"),p=e.n(k),g=e("8336"),b=e("b0af"),m=e("99d9"),w=(e("8ce9"),e("7560")),f=w["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let a;return this.$attrs.role&&"separator"!==this.$attrs.role||(a=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":a,...this.$attrs},on:this.$listeners})}}),_=e("132d"),C=e("2fa4"),x=(e("1681"),e("8654")),D=e("58df");const S=Object(D["a"])(x["a"]);var V=S.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...x["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const a=t.scrollHeight,e=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(e,a)+"px"},genInput(){const t=x["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){x["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),$=Object(u["a"])(v,l,d,!1,null,null,null),y=$.exports;p()($,{VBtn:g["a"],VCard:b["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VDivider:f,VIcon:_["a"],VSpacer:C["a"],VTextarea:V});var H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",{on:{click:function(a){return t.$emit("click")}}},[e("v-card-text",{staticClass:"pa-4",domProps:{innerHTML:t._s(t.compileMarkdown(t.card.front))}}),e("v-divider"),e("v-card-text",{staticClass:"pa-4",domProps:{innerHTML:t._s(t.compileMarkdown(t.card.back))}})],1)},I=[],T=e("0e54"),N=e.n(T),z=e("c0c4"),O=e.n(z),j={props:{card:Object},methods:{compileMarkdown(t){let a=N()(t);return O.a.sanitize(a)}}},M=j,B=Object(u["a"])(M,H,I,!1,null,null,null),G=B.exports;p()(B,{VCard:b["a"],VCardText:m["c"],VDivider:f});var R={components:{stackDialog:n["a"],cardDialog:y,card:G},computed:{...Object(c["c"])(["stack","user","host"])},data:()=>({dialog:!1,newCardDialog:!1,cardDialog:!1,editCardDialog:!1,newCard:{front:"",back:""},card:!1}),methods:{...Object(c["b"])(["getStacks","getStack"]),deleteStack(){r.a.delete(this.host+"/api/stacks/"+this.stack._id).then(t=>{console.log("Deleted stack"),this.getStacks().then(t=>{this.$router.push("/stacks")})})},saveStack(){let t=this.stack;r.a.put(this.host+"/api/stacks/"+this.stack._id,t).then(t=>{this.getStacks(),this.getStack(this.stack._id),this.dialog=!1})},saveNewCard(t){console.log(t),r.a.post(this.host+"/api/stacks/"+this.stack._id,t).then(t=>{this.getStack(this.stack._id).then(t=>{this.newCardDialog=!1})})},saveCard(t){r.a.put(this.host+"/api/stacks/"+this.stack._id+"/"+this.card._id,t).then(t=>{this.getStack(this.stack._id),this.cardDialog=this.editCardDialog=!1})},deleteCard(){r.a.delete(this.host+"/api/stacks/"+this.stack._id+"/"+this.card._id).then(t=>{this.getStack(this.stack._id),this.cardDialog=this.editCardDialog=!1})},subStack(){r.a.put(this.host+"/api/stacks/"+this.stack._id+"/sub").then(t=>{this.getStacks(),this.getStack()})},unsubStack(){r.a.delete(this.host+"/api/stacks/"+this.stack._id+"/sub").then(t=>{this.getStack(),this.getStacks()})},addStack(){r.a.post(this.host+"/api/stacks/"+this.stack._id+"/sub").then(t=>{this.getStacks(),this.getStack()})},compileMarkdown(t){let a=marked(t);return DOMPurify.sanitize(a)},openCard(t){this.card=t,this.cardDialog=!0}},created(){this.stack.unknown||r.a.patch(this.host+"/api/stacks/"+this.stack._id)}},E=R,F=(e("02e0"),e("62ad")),P=e("a523"),A=e("169a"),J=e("0fd9"),L=e("71d9"),K=e("2a7f"),q=Object(u["a"])(E,s,i,!1,null,null,null);a["default"]=q.exports;p()(q,{VBtn:g["a"],VCard:b["a"],VCardActions:m["a"],VCol:F["a"],VContainer:P["a"],VDialog:A["a"],VIcon:_["a"],VRow:J["a"],VSpacer:C["a"],VToolbar:L["a"],VToolbarTitle:K["a"]})}}]);
//# sourceMappingURL=stack.3addfc28.js.map